# コード定義

## 通貨

現時点、JPY以外の通貨はサポートしない。

| 通貨コード | 通貨名称 |
| --- | --- |
| CNY | 人民元 |
| GBP | ポンド |
| HKD | 香港ドル |
| USD | 米ドル |
| JPY | 日本円 |
| CAD | カナダドル |
| AUD | オーストラリア ドル |
| EUR | ユーロ |
| NZD | ニュージーランド ドル |
| KRW | 韓国ウォン |

注：返金と支払の通貨単位は同じでなければならない。

## 取引ステータス

| コード | 名称 | 説明 |
| --- | --- | --- |
| 00 | 支払成功 | 支払リクエストが正常に終了したコードを示す。 |
| 01 | 支払失敗 | 残高不足などによる支払処理に失敗したコードを示す。 |
| 02 | 支払待ち | マーチャントシステムから支払リクエストをONEPAYシステムに要求し、ONEPAYシステムが受付したコードを示す。 |
| 03 | 支払中 | ONEPAYシステムから支払リクエストをイシュアに要求したコードを示す。 |
| 04 | 支払タイムアウト | ネットワーク障害などによる規定な時間に応答がもらえず、支払リクエスト処理がタイムアウトした。 |
| 05 | 返金中 | 返金リクエストをイシュアに要求したコードを示す。 |
| 06 | 返金済 | 返金リクエストが正常に終了したコードを示す。 |
| 07 | 返金失敗 | 返金金額超過、残高不足などによる返金処理に失敗したコードを示す。 |
| 08 | 返金タイムアウト | ネットワーク障害などによる規定な時間に応答がもらえず、返金リクエスト処理がタイムアウトした。 |
| 09 | 支払取消中 | ONEPAYシステムから取消リクエストをイシュアに要求したコードを示す。 |
| 10 | 支払取消成功 | 取消リクエストが正常に終了したコードを示す。 |
| 11 | 支払取消失敗 | 取消リクエストが失敗したコードを示す。 |
| 12 | 支払取消タイムアウト | ネットワーク障害などによる規定な時間に応答がもらえず、取消リクエスト処理がタイムアウトしました。 |
| 13 | オーダクローズ | 該当トランザクションがクローズされたコードを示す。これより、該当トランザクションに対して操作が受け付けない。 |
| 14 | 顧客支払待ち | 暗証番号を入力待つコードを示す。<br>支払を完成するために、暗証番号が必要なときだけ顧客支払待ち状態になる。 |
| 15 | 顧客支払中止 | 暗証番号を入力せず、暗証番号入力画面を閉じたコードを示す。 |
| 16 | 入金中 | ONEPAYシステムから入金リクエストをイシュアに要求したコードを示す。 |
| 17 | 入金タイムアウト | ネットワーク障害などによる規定な時間に応答がもらえず、入金リクエスト処理がタイムアウトした。 |
| 18 | 入金成功 | 入金リクエストが正常に終了したコードを示す。 |
| 19 | 入金失敗 | 入金リクエストが失敗したコードを示す。 |
| 20 | 返金取消中 | 返金トランザクションに対して、ONEPAYシステムから取消リクエストをイシュアに要求したコードを示す。 |
| 21 | 返金取消成功 | 返金トランザクションに対して、取消リクエストが正常に終了したコードを示す。 |
| 22 | 返金取消失敗 | 返金トランザクションに対して、取消リクエストが失敗したコードを示す。 |
| 23 | 返金取消タイムアウト | 返金トランザクションに対して、ネットワーク障害などによる規定な時間に応答がもらえず、取消リクエスト処理がタイムアウトしました。 |
| 24 | 入金取消中 | 入金トランザクションに対して、ONEPAYシステムから取消リクエストをイシュアに要求したコードを示す。 |
| 25 | 入金取消成功 | 入金トランザクションに対して、取消リクエストが正常に終了したコードを示す。 |
| 26 | 入金取消失敗 | 入金トランザクションに対して、取消リクエストが失敗したコードを示す。 |
| 27 | 入金取消タイムアウト | 入金トランザクションに対して、ネットワーク障害などによる規定な時間に応答がもらえず、取消リクエスト処理がタイムアウトしました。 |


## 支払方法

支払方式とも呼ばれている。

| コード | 名称 |
| --- | --- |
| 01 | Alipay |
| 02 | Wechat Pay |
| 03 | UnionPay |
| 04 | Line Pay |
| 09 | 楽天ペイ |
| 10 | PayPay |
| 11 | ｄ払い |
| 15 | メルペイ |
| 16 | auPay |
| 18 | QUOカードPay |
| 24 | J-Coin Pay |
| 25 | JKOPay |
| 30 | Bank Pay |
| 42 | 銀行Pay |
| 43 | Pi Plus |
| 46 | XNAP |
| 50 | AEON Pay |
| 90 | Smart Code |
| GN01 | GN-Alipay |
| GN02 | GN-AlipayHK |
| GN03 | GN-kakaopay |
| GN04 | GN-Touch'nGo |
| GN05 | GN-EZ-Link |
| GN06 | GN-TrueMoney |
| GN07 | GN-DANA |
| GN08 | GN-Gcash |
| GN09 | GN-HelloMoney |
| GN10 | GN-Boost |
| GN11 | GN-RabbitLINEPay |
| GN12 | GN-BPI |
| GN13 | GN-Tinaba |
| GN14 | GN-NaverPay |
| GN15 | GN-TossPay |
| GN16 | GN-Paymaya |
| GN17 | GN-GrabPay |
| GN18 | GN-Kredivo |
| GN19 | GN-OCBCBank |
| GN20 | GN-ChangiPay |
| GN21 | GN-HiPay |
| GN22 | GN-PublicBank |
| GN23 | GN-Mpay |
| GN90 | Alipay+ |
| 99 | 自動判別 |

## オペレータシステム

| オペレータシステム |
| --- |
| ios |
| android |
| linux |
| windows |

## エラーコード

APIステータス：00|02|09

00: 成功

02: ネット通信異常

09: 異常

1：パラメータチェック異常

2：データベース関連異常および予期せぬシステム異常

3：イシュアから戻って来る異常

9：セキュリティ、権限など異常

凡例：E           09           1           01

凡例：固定    異常タイプ     サブタイプ    エラーコード

| エラーコード | エラー内容 | 備考 |
| --- | --- | --- |
| E02001 | 通信エラーが発生しました。 |  |
| E02002 | 外部システムとの接続にオーバータイムが発生しました。 |  |
| E02003 | 外部システムの応答でオーバータイムが発生しました。 |  |
| E09101 | リクエストパラメータ異常，{0}が入力されていません。 | {0}:必須入力项目名称 |
| E09102 | リクエストパラメータ異常，不正な日付です。 |  |
| E09103 | 条件に合うオーダが存在しません。 |  |
| E09104 | ユーザ名またはパスワードが違います。 |  |
| E09105 | パスワードの変更に失敗しました。 |  |
| E09106 | 端末が存在しません。または有効ではありません。 |  |
| E09107 | 端末のアクティブに失敗しました。 |  |
| E09108 | 支払方式が識別できません。 |  |
| E09109 | リクエストパラメータ異常，{0}は1～999999999範囲内の半角数字ではありません。 |  |
| E09110 | リクエストパラメータ異常，{0}が規定の桁数を超えています。 |  |
| E09111 | リクエストパラメータ異常，ロケールは有効ではありません。 |  |
| E09112 | リクエストパラメータ異常，タイムゾーンは有効ではありません。 |  |
| E09113 | リクエストパラメータ異常，ユーザコードは有効ではありません。 |  |
| E09114 | 注文の有効期間が時間切れです。 |  |
| E09115 | リクエストパラメータ異常，通貨は有効ではありません。 |  |
| E09116 | 署名が識別できません。 |  |
| E09117 | 支払が未成功のため、当該オーダは返金できません。 |  |
| E09118 | すでに取消したため、取消できません。 |  |
| E09119 | すでに返金したため、取消できません。 |  |
| E09120 | 返金の通貨が不正です。 |  |
| E09121 | すでに取消したため、返金できません。 |  |
| E09122 | アクセスURLが不正です({0})。 |  |
| E09123 | 返金可能な額を超過しました。 |  |
| E09124 | APPのバージョン番号が存在しません。 |  |
| E09125 | リクエストパラメータ異常，オーダ有効期限は有効ではありません。 |  |
| E09126 | 当該注文では取り消しサービスは使用できません。 |  |
| E09127 | リクエストパラメータ異常，{0}のフォーマットが正しくありません。 |  |
| E09128 | 返金金額が不正です。 |  |
| E09130 | リクエストパラメータ異常，バリュー種類は有効ではありません。 |  |
| E09131 | 取消トランザクションが取消できません。 |  |
| E09133 | 別の操作が行われていたため、取消できません。 |  |
| E09134 | 返金トランザクションは返金できません。 |  |
| E09135 | 取消トランザクションは返金できません。 |  |
| E09137 | 返金トランザクションは取消できません。 |  |
| E09138 | 該当支払方法は返金できません。 |  |
| E09139 | 該当支払方法は取消できません。 |  |
| E09140 | サービスは該当支払方法をサポートしておりません。 |  |
| E09141 | 読み込んだバーコードが判定できません。 |  |
| E09142 | 検索日時は{0}日以内に設定してください。 |  |
| E09143 | 検索期間は{0}日以内に設定してください。 |  |
| E09144 | 検索結果が{0}件を超えました、検索条件を再設定してください。 |  |
| E09145 | 該当取引のタイプはクローズをサポートしません。 |  |
| E09146 | 支払が成功したため、当該オーダはクローズできません。 |  |
| E09147 | クローズオーダーは再クローズできません。 |  |
| E09148 | QRコードが有効期限を超えています。 |  |
| E09201 | DBアクセスの異常が発生しました({0})。 | ｛0｝：異常の詳細 |
| E09202 | 内部システムの異常が発生しました。 |  |
| E09203 | メンテナンス中。 |  |
| E09299 | 未定義エラー受信が発生しました。 |  |
| E09301 | 外部システムの異常が発生しました。 |  |
| E09901 | 不正なアクセスです。({0})。 | {0}:<br>  1.トークン 異常<br>  2.デジタル署名異常<br>  3.店舗が存在しませんまたは有効ではありません<br>  4.端末が存在しませんまたは有効ではありません<br>  5.支払方式が存在しませんまたは有効ではありません <br> 6.リクエストパラメータ未送信<br>7.店舗または端末が識別できません<br>8.加盟店が識別できません |

### サブエラーコード
ONEPAY集約したサブエラーコードを以下に示す。

| エラーコード | エラー内容 |
| --- | --- |
| ACCOUNT_REMAINS_CHANGED | 会員口座の残高が変動しました。 |
| ACOUNT_ERROR | 決済アカウントの状態エラー |
| AMOUNT_NOT_MATCH | 決済予約時の金額と要求された金額が異なります。 |
| BALANCE_LIMIT_OVER | 残高上限を超えてます。 |
| BLACK_LIST_CARD | ブラックリストに登録されたカードです。 |
| CARD_AUTH_ERROR | カード承認エラー |
| CARD_CHANGED | 登録カード変更されました。 |
| CARD_DECLINED | カード使用が拒否されました。 |
| CARD_EXPIRED | カードの有効期限が過ぎています。 |
| CARD_LIMIT_EXCEEDED | カードの利用限度額超過 |
| CARD_NOT_ACTIVE | 「未使用」のカードです。 |
| CARD_NOT_ENOUGH | カードの決済口座の残高が不足しています。 |
| CARD_PAY_ERROR | カード決済エラー |
| CARD_REPORT_STOLEN | 盗難報告されたカードです。 |
| CARD_TEMP_ERROR | カード決済の一時的なエラー |
| CARD_TEMP_SUSPENDED | カード決済が一時的に中断されました。 |
| CARD_USE_SUSPENDED | 使用が停止されたカードです。 |
| DEPOSIT_MAX_PAYMENT_LIMITS_OVER | 入金限度額超過です。 |
| DEPOSIT_NOT_SUPPORT | 使い切り型のカードは入金できません。 |
| INVALID_AMOUNT | 金額情報エラーです。 |
| INVALID_CARD | 存在しないカード番号 |
| INVALID_CARD_PAY_INFO | カードの決済情報が正しくありません。 |
| INVALID_CURRENCY | この通貨には対応していません。 |
| INVALID_CVN | CVN 入力エラー |
| INVALID_FORMAT | データフォーマットエラー |
| INVALID_HEAD | ヘッダー情報エラー |
| INVALID_ONETIME_KEY | 無効な oneTimeKey です。 |
| INVALID_PARAM | パラメータエラー |
| INVALID_PIN_CODE | 誤ったPin Codeです。 |
| INVALID_REQUEST | リクエストが正しくありません。 |
| INVALID_RETRY | 前回のリクエスト情報と異なります(リクエストリトライ)。 |
| INVALID_STATUS | 処理できない状態です。 |
| INVALID_TRANSACTION | 無効な取引番号です。 |
| INVALID_VERSION | 有効なバージョンではありません。 |
| INVALID_VOLUME | 付与額は0円になります。 |
| LACK_CARD_INFO | クレジットカード決済情報漏れ |
| MERCHANT_NOT_EXIST | 加盟店がありません。 |
| NO_ACCOUNT | このユーザはアカウントを持っていません。 |
| NO_AVAILABLE_CARD | 使用できないカードです。 |
| NO_AVAILABLE_VALUE | 加盟店で使用できないバリューです。(QUOカードPay対象） |
| NO_PAYMENT_INFO | 決済要求情報がありません。 |
| NOT_ENOUGH | 残高不足 |
| NOT_ENOUGH\\\\\ | 残高不足 　残高連携　(QUOカードPay対象） |
| NOT_USER | 会員ではありません。 |
| ONETIME_KEY_EXPIRED | oneTimeKey が有効期限切れ |
| ORDER_ID_USED | すでに同じ注文番号で取引された履歴が存在します。 |
| PAY_LIMIT_EXCEEDED | カード 1 件あたりの決済限度額超過 |
| PAY_NOT_ALLOWED | 加盟店が取引を利用できない状態です。 |
| PAYMENT_DECLINED | 不正使用が疑われるため決済が拒否されました。 |
| PAYMENT_IN_PROGRESS | 決済中です。 |
| PAYMENT_NOT_ALLOWED | 継続決済を使用できない加盟店です。 |
| REFUND_AMOUNT_EXCEEDED | 払い戻し可能な金額を超えました。 |
| REFUND_EXPIRE | 払い戻し可能日が過ぎているため払い戻しができません。 |
| REQUEST_DUPLICATED | リクエスト処理中です。 |
| RETRY_AGAIN_LATER | 一時的なエラーです。しばらくたってからリトライしてください。 |
| REVERSE_EXPIRE | 取消できません。 |
| SERVICE_NOT_SUPPORT | 他店舗の取消処理はできません。 |
| SETTING_LIMIT_OVER | 設定の取引上限値を超えています。 |
| SYSTEM_ERROR | システム障害のため、処理が実行できませんでした。 |
| TERM_NOT_SAME | 異なる端末IDからの要求取消はできません。 |
| TRADE_NOT_EXIST | 取引対象がありません。 |
| TRANSACION_ALREADY_REFUND | すでに払い戻し済みの取引です。 |
| TRANSACTION_ALREADY_MADE | 既に取引された決済です。 |
| TRANSACTION_ERROR | 取引処理に失敗しました。 |
| TRANSACTION_MAX_EXCEEDED | 照会可能な最大取引数を超えました(100 件)。 |
| TRANSACTION_NOT_FOUND | 取引履歴がありません。 |
| UNDER_MAINTENANCE | メンテナンス中 |
| USER_SUSPENDED_TRANSACTION | 購入した会員が取引不可能な状態です。 |
| UNKNOWNERROR | 上記以外 |
| ACCOUNT_ERROR | アクセスキーまたは端末IDが不正です。 |
| CARD_EXPIRE | 既に使われているカードです。 |
| INVALID_PIN | PINが不正です。 |
| INVALID_REVERSE_FEE | 取消額が一致しません。 |
| NO_AUTH | カードが利用できない状態となっています。 |
| ORDER_REVERSED | 既に取消処理が実行済みです。 |
| ORDER_STATUS_UNKNOWN | 正常(要求取消時、取消対象が存在しないまたは既に取消された場合) |
| SYSTEMERROR | システム障害のため、処理が実行できませんでした。 |
